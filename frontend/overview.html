<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SplitEasy - Overview</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">
  <link href="css/overview.css" rel="stylesheet">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <!-- Navbar -->
  <div id="navbar" class="d-none d-md-block"></div>
  <div id="navbarMobile" class="d-md-none"></div>

  <!-- Main Content -->
  <div class="container-fluid py-4">
    <!-- Page Header -->
    <div class="row mb-4">
      <div class="col-12">
        <div class="card shadow-sm border-0">
          <div class="card-body p-4">
            <div class="d-flex justify-content-between align-items-center">
              <div>
                <h1 class="mb-2 text-primary">
                  <i class="bi bi-bar-chart-line me-2"></i>Expenses Overview
                </h1>
                <p class="text-muted mb-0 fs-5">Comprehensive analytics across all your groups</p>
              </div>
              <div class="d-flex gap-2">
                <button class="btn btn-outline-primary btn-lg" onclick="loadOverviewData()" title="Refresh Data">
                  <i class="bi bi-arrow-clockwise me-2"></i>Refresh
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Filters Section -->
    <div class="row mb-4">
      <div class="col-12">
        <div class="card shadow-sm border-0">
          <div class="card-header bg-gradient text-white"
            style="background: linear-gradient(135deg, #0d6efd, #66a6ff);">
            <h5 class="mb-0">
              <i class="bi bi-funnel me-2"></i>Filters & Controls
            </h5>
          </div>
          <div class="card-body p-4">
            <div class="row g-3">
              <div class="col-md-3">
                <label class="form-label fw-semibold">
                  <i class="bi bi-person me-1"></i>User
                </label>
                <select id="userSelect" class="form-select form-select-lg">
                  <option value="">All Users</option>
                </select>
              </div>
              <div class="col-md-3">
                <label class="form-label fw-semibold">
                  <i class="bi bi-calendar me-1"></i>Time Range
                </label>
                <select id="timeRange" class="form-select form-select-lg">
                  <option value="daily">Daily</option>
                  <option value="monthly" selected>Monthly</option>
                  <option value="yearly">Yearly</option>
                  <option value="lifetime">Lifetime</option>
                </select>
              </div>
              <div class="col-md-3">
                <label class="form-label fw-semibold">
                  <i class="bi bi-calendar-range me-1"></i>From Date
                </label>
                <input type="date" id="fromDate" class="form-control form-control-lg">
              </div>
              <div class="col-md-3">
                <label class="form-label fw-semibold">
                  <i class="bi bi-calendar-range me-1"></i>To Date
                </label>
                <input type="date" id="toDate" class="form-control form-control-lg">
              </div>
            </div>
            <div class="row mt-3">
              <div class="col-12">
                <div class="d-flex gap-2">
                  <button class="btn btn-primary btn-lg" id="applyFilterBtn">
                    <i class="bi bi-check-circle me-2"></i>Apply Filters
                  </button>
                  <button class="btn btn-outline-secondary btn-lg" id="resetFilterBtn">
                    <i class="bi bi-arrow-counterclockwise me-2"></i>Reset
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Charts Section -->
    <div class="row g-4">
      <!-- Expenses by Group Chart -->
      <div class="col-lg-8">
        <div class="card shadow-sm border-0 h-100">
          <div class="card-header bg-gradient text-white"
            style="background: linear-gradient(135deg, #0d6efd, #66a6ff);">
            <h5 class="mb-0">
              <i class="bi bi-bar-chart me-2"></i>Expenses by Group
            </h5>
          </div>
          <div class="card-body p-4">
            <div class="chart-container">
              <canvas id="overviewGroupChart"></canvas>
            </div>
            <div id="groupChartEmpty" class="text-center py-5 d-none">
              <i class="bi bi-bar-chart text-muted" style="font-size: 4rem;"></i>
              <h5 class="text-muted mt-3">No Data Available</h5>
              <p class="text-muted">No expense data found for the selected filters</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Expenses Over Time Chart -->
      <div class="col-lg-4">
        <div class="card shadow-sm border-0 h-100">
          <div class="card-header bg-gradient text-white"
            style="background: linear-gradient(135deg, #0d6efd, #66a6ff);">
            <h5 class="mb-0">
              <i class="bi bi-graph-up me-2"></i>Expenses Over Time
            </h5>
          </div>
          <div class="card-body p-4">
            <div class="chart-container">
              <canvas id="overviewDateChart"></canvas>
            </div>
            <div id="dateChartEmpty" class="text-center py-5 d-none">
              <i class="bi bi-graph-up text-muted" style="font-size: 4rem;"></i>
              <h5 class="text-muted mt-3">No Data Available</h5>
              <p class="text-muted">No expense data found for the selected time range</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Summary Cards -->
    <div class="row g-4 mt-4">
      <div class="col-md-3">
        <div class="card shadow-sm border-0 text-center">
          <div class="card-body p-4">
            <div class="text-primary mb-3">
              <i class="bi bi-people-fill" style="font-size: 2.5rem;"></i>
            </div>
            <h4 class="text-primary mb-1" id="totalGroups">0</h4>
            <p class="text-muted mb-0">Total Groups</p>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card shadow-sm border-0 text-center">
          <div class="card-body p-4">
            <div class="text-success mb-3">
              <i class="bi bi-receipt" style="font-size: 2.5rem;"></i>
            </div>
            <h4 class="text-success mb-1" id="totalExpenses">0</h4>
            <p class="text-muted mb-0">Total Expenses</p>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card shadow-sm border-0 text-center">
          <div class="card-body p-4">
            <div class="text-warning mb-3">
              <i class="bi bi-currency-dollar" style="font-size: 2.5rem;"></i>
            </div>
            <h4 class="text-warning mb-1" id="totalAmount">$0</h4>
            <p class="text-muted mb-0">Total Amount</p>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card shadow-sm border-0 text-center">
          <div class="card-body p-4">
            <div class="text-info mb-3">
              <i class="bi bi-person-plus" style="font-size: 2.5rem;"></i>
            </div>
            <h4 class="text-info mb-1" id="totalUsers">0</h4>
            <p class="text-muted mb-0">Total Users</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="js/config.js"></script>
  <script src="js/notifications.js"></script>
  <script src="js/navbar.js"></script>
  <script src="js/overview.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>